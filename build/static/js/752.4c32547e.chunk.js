"use strict";(self.webpackChunklisting_admin=self.webpackChunklisting_admin||[]).push([[752],{2548:function(e,t,n){n(2791);var i=n(8116),s=n(184);t.Z=function(e){var t=e.limit,n=e.pages,a=e.currentPage,c=e.PaginationHandleClick,r=[];if(n<=5)for(var o=0;o<n;o++)r.push({offSet:o*t,page:o+1});else if(n>=5&&a<=4){for(var l=0;l<=4;l++)r.push({offSet:l*t,page:l+1});r.push({offSet:"...",page:"..."}),r.push({offSet:(n-1)*t,page:n})}else if(n>=5&&a>=5&&a<=n-4){r.push({offSet:0,page:1}),r.push({offSet:"...",page:"..."});for(var u=a-1;u<=a+1;u++)r.push({offSet:(u-1)*t,page:u});r.push({offSet:"...",page:"..."}),r.push({offSet:(n-1)*t,page:n})}else{r.push({offSet:0,page:1}),r.push({offSet:"...",page:"..."});for(var d=n-4;d<=n;d++)r.push({offSet:(d-1)*t,page:d})}return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"paginationWrapper",children:(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(i.Z.Prev,{disabled:1==a,onClick:function(){return c((a-2)*t,a-1)}}),r.map((function(e,t){return e.page===a?(0,s.jsx)(i.Z.Item,{disabled:"..."===e.page,className:"active",onClick:function(){return c(e.offSet,e.page)},children:e.page},t):(0,s.jsx)(i.Z.Item,{disabled:"..."===e.page,onClick:function(){return c(e.offSet,e.page)},children:e.page},t)})),(0,s.jsx)(i.Z.Next,{disabled:a==n,onClick:function(){return c(a*t,a+1)}})]})})})}},7752:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var i=n(4165),s=n(5861),a=n(9439),c=n(717),r=n(4292),o=n(3360),l=n(2591),u=n(614),d=(n(3704),n(9472)),f=n(7999),h=n(1326),p=n(2791),v=n(979),m=(n(8427),n(1453)),x=n(5634),Z=n(5819),j=n(1993),g=(n(5462),n(8472)),y=n(2548),N=n(9281),S=n(3532),k=n(9508),b=n(1795),w=n(184);var C=function(){var e=(0,p.useState)(!1),t=(0,a.Z)(e,2),n=t[0],C=t[1],A=(0,p.useState)(!1),H=(0,a.Z)(A,2),F=(H[0],H[1],(0,p.useState)([])),_=(0,a.Z)(F,2),T=_[0],E=_[1],P=(0,p.useState)([]),B=(0,a.Z)(P,2),I=(B[0],B[1]),z=(0,p.useState)(!1),V=(0,a.Z)(z,2),G=V[0],W=V[1],D=(0,p.useState)(),K=(0,a.Z)(D,2),L=K[0],R=K[1],U=(0,p.useState)(""),Y=(0,a.Z)(U,2),$=Y[0],q=Y[1],J=(0,p.useState)(""),M=(0,a.Z)(J,2),O=(M[0],M[1]),Q=(0,p.useState)(50),X=(0,a.Z)(Q,2),ee=X[0],te=(X[1],(0,p.useState)(1)),ne=(0,a.Z)(te,2),ie=ne[0],se=ne[1],ae=(0,p.useState)(0),ce=(0,a.Z)(ae,2),re=ce[0],oe=ce[1],le=(0,p.useState)(0),ue=(0,a.Z)(le,2),de=ue[0],fe=ue[1],he=(0,p.useState)(!1),pe=(0,a.Z)(he,2),ve=pe[0],me=pe[1],xe=(0,p.useState)([]),Ze=(0,a.Z)(xe,2),je=Ze[0],ge=Ze[1],ye=(0,N.Nr)($,1e3),Ne=(0,a.Z)(ye,1)[0],Se=(0,p.useState)(!1),ke=(0,a.Z)(Se,2),be=ke[0],we=ke[1],Ce=(0,p.useState)(),Ae=(0,a.Z)(Ce,2),He=Ae[0],Fe=Ae[1],_e=(0,p.useRef)(null);(0,p.useEffect)((function(){me(!0),Pe()}),[]),(0,p.useEffect)((function(){0===Ne.length?Pe():De()}),[Ne]);var Te=function(e){"new"==e?(Ke.resetForm(),Fe(),C(!0)):C(!0)},Ee=function(){W(!1),O("")};function Pe(){return Be.apply(this,arguments)}function Be(){return Be=(0,s.Z)((0,i.Z)().mark((function e(){var t,n=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:0,me(!0),e.next=4,(0,x.kA)("".concat(h._n,"/auth/location?offSet=").concat(t,"&limit=").concat(ee)).then((function(e){var t,n,i;null!==e&&void 0!==e&&e.data&&(me(!1),fe(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.pages),E(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.records),(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.records.length)>10&&we(!0))}));case 4:case"end":return e.stop()}}),e)}))),Be.apply(this,arguments)}var Ie=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return me(!0),e.next=3,(0,x.kA)("".concat(h._n,"/auth/location?offSet=",0,"&limit=").concat(ee*de)).then((function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.records){var n,i=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.records,s=[];i.map((function(e,t){s[t]={city:null!==e&&void 0!==e&&e.city?null===e||void 0===e?void 0:e.city:"Null",cityEnglish:null!==e&&void 0!==e&&e.cityEnglish?null===e||void 0===e?void 0:e.cityEnglish:"Null",cityHebrew:null!==e&&void 0!==e&&e.cityHebrew?null===e||void 0===e?void 0:e.cityHebrew:"Null",createdAt:null!==e&&void 0!==e&&e.createdAt?null===e||void 0===e?void 0:e.createdAt:"Null",updatedAt:null!==e&&void 0!==e&&e.updatedAt?null===e||void 0===e?void 0:e.updatedAt:"Null",id:null!==e&&void 0!==e&&e._id?null===e||void 0===e?void 0:e._id:"Null"}})),ge(s),setTimeout((function(){_e.current.link.click(),me(!1)}),2e3)}}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(e){Ke.setFieldValue("cityName",e.cityHebrew),Fe(e._id),I(e),O(e.cityHebrew),Te()},Ve=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return me(!0),e.next=3,(0,x.P3)("".concat(h.Fp,"/location/").concat(L));case 3:200===e.sent.status?(me(!1),Pe(),(0,Z.z)(S.oZ),setTimeout((function(){j.Am.dismiss()}),1e3)):((0,Z.g)(S.Zv),setTimeout((function(){j.Am.dismiss()}),1e3)),Ee();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),We=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.e8)("".concat(h.Fp,"/location/status/").concat(t._id));case 2:s=e.sent,me(!0),200===s.status?(me(!1),Pe(),T.filter((function(e){return!0===e.status})),(0,Z.z)(S.eI),setTimeout((function(){j.Am.dismiss()}),1e3)):((0,Z.g)(S.Zv),setTimeout((function(){j.Am.dismiss()}),1e3));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),De=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t,n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return me(!0),e.next=3,(0,x.kA)("".concat(h.Fp,"/location/search?text=").concat(Ne,"&offSet=").concat(re,"&limit=").concat(ee));case 3:n=e.sent,s=null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.data,me(!1),s.length&&E(s),s.length<10&&we(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=(0,b.TA)({initialValues:{cityName:""},validate:function(e){var t={};return e.cityName||(t.cityName=S.$7),t},onSubmit:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s,a,c,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!He){e.next=9;break}return n={city:t.cityName,cityHebrew:t.cityName,cityEnglish:t.cityName,id:He},e.next=4,(0,x.e8)("".concat(h.Fp,"/location/").concat(n.id),n);case 4:s=e.sent,me(!0),200===s.status?(me(!1),a=T.findIndex((function(e){return e._id===n.id})),T[a]=s.data.data,E(T),C(!1),(0,Z.z)(S.SH),setTimeout((function(){j.Am.dismiss()}),1e3)):((0,Z.g)(S.Zv),setTimeout((function(){j.Am.dismiss()}),1e3)),e.next=15;break;case 9:return c={city:t.cityName,cityEnglish:t.cityName,cityHebrew:t.cityName},e.next=12,(0,x.Ko)("".concat(h.Fp,"/location"),c);case 12:r=e.sent,me(!0),200===(null===r||void 0===r?void 0:r.status)?(me(!1),C(!1),Pe(),O(""),(0,Z.z)(S.yS),setTimeout((function(){j.Am.dismiss()}),1e3)):((0,Z.g)(S.Zv),setTimeout((function(){j.Am.dismiss()}),1e3));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return(0,w.jsxs)(w.Fragment,{children:[ve&&(0,w.jsx)(k.Z,{}),(0,w.jsx)("div",{className:"main-content",children:(0,w.jsx)("div",{className:"listing-headder",children:(0,w.jsxs)("div",{className:"tabing-content-inner",children:[(0,w.jsxs)("div",{className:"search-point justify-content-between",children:[(0,w.jsxs)(c.Z,{inline:"true",className:"search-box d-flex",children:[(0,w.jsx)(r.Z,{type:"text",placeholder:"Search",className:"mr-2",value:$,onChange:function(e){return q(e.target.value)}}),(0,w.jsx)(o.Z,{variant:"outline-success",children:(0,w.jsx)("img",{src:d.Z,alt:""})}),(0,w.jsx)(o.Z,{onClick:Ie,className:"export-btn btn btn-primary",children:(0,w.jsx)("img",{src:f.Z,alt:""})}),(0,w.jsx)(g.CSVLink,{className:"hidden",data:je,ref:_e,target:"_blank"})]}),(0,w.jsx)(o.Z,{onClick:function(){return Te("new")},className:"new-btn",children:"New"})]}),(0,w.jsx)("div",{className:"listing-content-table",children:(0,w.jsxs)(l.Z,{responsive:!0,className:"porfile-list",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{children:"ID"}),(0,w.jsx)("th",{children:"City"}),(0,w.jsx)("th",{children:"Profile"}),(0,w.jsx)("th",{})]})}),(0,w.jsx)("tbody",{children:null===T||void 0===T?void 0:T.map((function(e,t){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{onClick:function(t){return ze(e)},children:t+1}),(0,w.jsx)("td",{onClick:function(t){return ze(e)},children:null===e||void 0===e?void 0:e.cityHebrew}),(0,w.jsx)("td",{onClick:function(t){return ze(e)},children:e.profile?e.profile:0}),(0,w.jsx)("td",{children:(0,w.jsxs)("div",{className:"d-flex",children:[(0,w.jsx)("div",{className:"statusWrap",children:(0,w.jsxs)("label",{className:"switch",children:[(0,w.jsx)("input",{type:"checkbox",onChange:function(t){return We(e,t)},checked:e.status}),(0,w.jsx)("span",{className:"slider round"})]})}),(0,w.jsx)("img",{onClick:function(t){return n=e._id,W(!0),void R(n);var n},src:m.Z,alt:"delete"})]})})]},t)}))})]})}),be&&(0,w.jsx)(y.Z,{limit:ee,pages:de,currentPage:ie,PaginationHandleClick:function(e,t){oe(e),se(t),Pe(e)}})]})})}),(0,w.jsx)(u.Z,{backdrop:"static",show:n,onHide:Ge,className:"location-modal",children:(0,w.jsxs)(c.Z,{onSubmit:Ke.handleSubmit,children:[(0,w.jsx)("div",{className:"crossBtnwrap d-flex justify-content-end",children:(0,w.jsx)(o.Z,{onClick:function(){C(!1)},children:(0,w.jsx)("img",{src:v.Z,alt:"close"})})}),(0,w.jsx)(u.Z.Body,{children:(0,w.jsxs)(c.Z.Group,{className:"form-group",controlId:"cityName",children:[(0,w.jsx)(c.Z.Control,{type:"text",placeholder:"City",onChange:Ke.handleChange,onBlur:Ke.handleBlur,value:Ke.values.cityName}),Ke.errors.cityName&&Ke.touched.cityName?(0,w.jsx)("div",{className:"text-danger",children:Ke.errors.cityName}):null]})}),(0,w.jsx)(u.Z.Footer,{children:(0,w.jsx)(o.Z,{type:"submit",className:"save",variant:"primary",children:He?"Update":"Save"})})]})}),(0,w.jsx)(u.Z,{show:G,onHide:Ee,className:"category-modal",children:(0,w.jsxs)(c.Z,{children:[(0,w.jsx)("div",{className:"crossBtnwrap d-flex justify-content-end",children:(0,w.jsx)(o.Z,{children:(0,w.jsx)("img",{src:v.Z,alt:"close",onClick:Ee})})}),(0,w.jsx)(u.Z.Body,{children:(0,w.jsx)(c.Z.Group,{className:"form-group",children:(0,w.jsxs)("div",{className:"text-center content-center",children:[(0,w.jsx)("h3",{children:S.fF}),(0,w.jsxs)("p",{children:[(0,w.jsxs)(o.Z,{type:"button",className:"save",variant:"info",onClick:Ee,children:[" ","No"," "]})," ",(0,w.jsxs)(o.Z,{type:"button",className:"save",variant:"danger",onClick:Ve,children:[" ","Yes"," "]})]})]})})})]})})]})}}}]);
//# sourceMappingURL=752.4c32547e.chunk.js.map